<div class="flex flex-col md:flex-row gap-8">
  <!-- Roles Table Card -->
  <div class="card">
    <div class="flex items-center justify-between mb-6">
      <h3 class="font-bold">Roles</h3>
      <div class="flex gap-2">
        <app-button-export
          nameOfTable="Roles"
          [data]="roles()"
          label="Export to Excel"
        />
        <app-button-create
          [size]="24"
          (click)="openModal('create-role')"
        ></app-button-create>
      </div>
    </div>
    <div class="overflow-x-auto dark:bg-secondary-dark rounded-lg">
      <table class="min-w-full divide-y dark:divide-gray-100">
        <thead>
          <tr>
            <th class="px-4 py-2 text-left">#</th>
            <th class="px-4 py-2 text-left">Name</th>
            <th class="px-4 py-2 text-left">Description</th>
            <th class="px-4 py-2 text-left">Status</th>
            <th class="px-4 py-2 text-left">Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (role of roles(); track role.id; let idx = $index,e =$even) {
          <tr class="border-b border-gray-100 dark:border-gray-700">
            <td class="px-4 py-2 font-semibold text-gray-900 dark:text-white">
              {{ idx + 1 }}
            </td>
            <td class="px-4 py-2">{{ role.name }}</td>
            <td class="px-4 py-2">{{ role.description }}</td>
            <td class="px-4 py-2">
              @if (role.status === 1) {
              <span
                class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 border border-green-300 dark:border-green-700"
              >
                Active
              </span>
              } @else {
              <span
                class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border border-red-300 dark:border-red-700"
              >
                Inactive
              </span>
              }
            </td>
            <td class="px-4 py-2 h-full">
            <div class="flex gap-2 justify-center items-center h-full">
             
              <button
                type="button"
                (click)="onUpdateRole(role)"
                class="cursor-pointer text-gray-900 hover:text-primary-500 dark:text-white"
              >
                <svg class="w-5 h-5 mr-2">
                  <use [attr.href]="getIconHref('pencil')"></use>
                </svg>
              </button>
              <button
                type="button"
                class="cursor-pointer text-gray-900 hover:text-primary-500 dark:text-white"
                (click)="deleteRol(role)"
              >
                <svg class="w-5 h-5 mr-2">
                  <use [attr.href]="getIconHref('trash-2')"></use>
                </svg>
              </button>
            </div>
          </td>
          </tr>
          }
          <!-- Example row, replace with @for if you have data -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Permissions Table Card -->
  <div class="card">
    <div class="flex items-center justify-between mb-6">
      <h3 class="font-bold">Permissions</h3>
      <div class="flex gap-2">
        <app-button-export
          nameOfTable="Permissions"
          [data]="permissions()"
          label="Export to Excel"
        />
        <app-button-create
          [size]="24"
          (click)="openModal('create-permission')"
        ></app-button-create>
      </div>
    </div>
    <div class="overflow-x-auto dark:bg-secondary-dark rounded-lg">
      <table class="min-w-full divide-y dark:divide-gray-100">
        <thead>
          <tr>
            <th class="px-4 py-2 text-left">#</th>
            <th class="px-4 py-2 text-left">Name</th>
            <th class="px-4 py-2 text-left">Description</th>
            <th class="px-4 py-2 text-left">Status</th>
            <th class="px-4 py-2 text-left">Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (permission of permissions(); track permission.id; let idx =
          $index,e =$even) {
          <tr class="border-b border-gray-100 dark:border-gray-700">
            <td class="px-4 py-2 font-semibold text-gray-900 dark:text-white">
              {{ idx + 1 }}
            </td>
            <td class="px-4 py-2">{{ permission.name }}</td>
            <td class="px-4 py-2">{{ permission.description }}</td>
            <td class="px-4 py-2">
              @if (permission.status === 1) {
              <span
                class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 border border-green-300 dark:border-green-700"
              >
                Active
              </span>
              } @else {
              <span
                class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border border-red-300 dark:border-red-700"
              >
                Inactive
              </span>
              }
            </td>
            <td class="px-4 py-2 h-full">
              <div class="flex gap-2 justify-center items-center h-full">
                <button
                  type="button"
                  class="cursor-pointer text-gray-900 hover:text-primary-500 dark:text-white"
                >
                  <svg class="w-5 h-5 mr-2">
                    <use [attr.href]="getIconHref('pencil')"></use>
                  </svg>
                </button>
                <button
                  type="button"
                  class="cursor-pointer text-gray-900 hover:text-primary-500 dark:text-white"
                >
                  <svg class="w-5 h-5 mr-2">
                    <use [attr.href]="getIconHref('trash-2')"></use>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          }
          <!-- Example row, replace with @for if you have data -->
        </tbody>
      </table>
    </div>
  </div>
</div>
@if (modalType() === 'create-role') {
<app-generic-modal [isOpen]="true" title="Create Role" (closed)="closeModal()">
  <app-role-form
    [permissions]="permissions()"
    (newrolePermissions)="summitRol($event)"
  >
  </app-role-form>
</app-generic-modal>
}
@if (modalType() === 'update-role') {
<app-generic-modal [isOpen]="true" title="Update Role" (closed)="closeModal()">
  <app-role-form
    [initialRolePermissions]="modalData()"
    [permissions]="permissions()"
    (newrolePermissions)="summitRol($event)"
  >
  </app-role-form>
</app-generic-modal>
}
