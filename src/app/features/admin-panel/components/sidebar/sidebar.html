<aside
  [class.w-64]="!collapsed()"
  [class.w-20]="collapsed()"
  class="h-screen transition-all duration-200 overflow-hidden
         bg-primary-light text-text-light dark:bg-primary-dark dark:text-text-dark"
>
  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
    @if (!collapsed()) {
      <span class="text-lg font-bold">Admin</span>
    }
    <button (click)="toggleSidebar()" class="text-gray-900 dark:text-white">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <nav class="mt-4 flex flex-col gap-2">
    @for (item of navMenu(); track item.route) {
      @if (!item.children) {
        <a
          [routerLink]="item.route"
          routerLinkActive="bg-primary-500/25 text-primary-500 dark:bg-gray-800 dark:text-white font-bold"
          [routerLinkActiveOptions]="{ exact: true }"
          class="flex items-center px-4 py-2 rounded hover:bg-primary-500/25 hover:text-primary-500 dark:hover:bg-gray-800 dark:hover:text-white transition"
        >
          <svg class="w-5 h-5 mr-2">
            <use [attr.href]="getIconHref(item.icon)"></use>
          </svg>
          @if (!collapsed()) { <span>{{ item.label }}</span> }
        </a>
      } @else {
        <div
          (click)="toggleSubmenu(item.route)"
          class="flex items-center justify-between px-4 py-2 rounded hover:bg-primary-500/25 hover:text-primary-500 dark:hover:bg-gray-800 dark:hover:text-white cursor-pointer transition"
        >
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2">
              <use [attr.href]="getIconHref(item.icon)"></use>
            </svg>
            @if (!collapsed()) { <span>{{ item.label }}</span> }
          </div>
          @if (!collapsed()) {
            <svg
              [class.rotate-90]="isSubmenuExpanded(item.route)"
              class="w-4 h-4 text-gray-500 transition-transform"
              fill="none" stroke="currentColor" viewBox="0 0 24 24"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 5l7 7-7 7" />
            </svg>
          }
        </div>
        @if (isSubmenuExpanded(item.route)) {
          <div class="ml-6 flex flex-col gap-1">
            @for (child of item.children; track child.route) {
              <a
                [routerLink]="child.route"
                routerLinkActive="bg-primary-500/25 text-primary-500 dark:bg-gray-800 dark:text-white font-bold"
                [routerLinkActiveOptions]="{ exact: true }"
                class="flex items-center px-4 py-1 rounded hover:bg-primary-500/25 hover:text-primary-500 dark:hover:bg-gray-800 dark:hover:text-white transition"
              >
                @if (!collapsed()) { <span>{{ child.label }}</span> }
              </a>
            }
          </div>
        }
      }
    }
  </nav>

  <!-- Log Out Button -->
  <div class="mt-auto p-4 border-t border-gray-200 dark:border-gray-700">
    <button
      (click)="logout()"
      class="w-full flex items-center px-4 py-2 rounded text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200"
    >
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
      </svg>
      @if (!collapsed()) { <span>Log Out</span> }
    </button>
  </div>
</aside>
